---
title: 计算机网络技术之子网分配
id: 23
date: 2024-12-03 17:09:48
auther: yutanbird
cover: https://imagere.oss-cn-beijing.aliyuncs.com/img20220904/20220904172404.png
excerpt: 子网可以有等长子网和不等长子网，一定看清楚问的什么
permalink: /archives/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF%E4%B9%8B%E5%AD%90%E7%BD%91%E5%88%86%E9%85%8D
categories:
 - 考研计算机网络
tags: 
 - 计算机网络技术
 - 物理层
 - 考研
---



## 前言

&emsp;后文不再对子网掩码，子网，IP地址，CIDR做解释。

&emsp;对于是否能够使用全0或者全1作为子网号呢？RFC950是对此有这样的建议，但是在RFC1878中，又把这个建议去除了。

&emsp;做题中：如果是 **分类网络** 的话，那就不要用全0或者全1的子网；如果是 **CIDR** 的话，那就可以用。

&emsp;至于全0或者全1的主机号能不能用呢？那肯定是不行的，这个目前的规定仍然是网络号与广播地址的定义。

## 定长子网的划分

&emsp;定长子网，这里的长度指的是子网网段IP地址的范围。通俗来说，就是划分子网的时候，每个子网的子网掩码都是一样的。

&emsp;下面来举个例子，为了方便起见，我们以`192.168.1.0/24`这个网段来举例子。

- 给定一个网段，要求你把该网段分成n个子网。

  > - 题目暗示或者给了子网中主机数量`m`
  >
  >   > 确定每个子网中，主机号的位数`b`，$2^b-2 \geq m$，然后又能得出子网号来
  >
  > - 题目要求划分成n个子网
  >
  >   > 确定需要多少位作为子网号，才能分配n个子网
  >
  > 上面结论得出子网号的位数之后，就可以划分子网。加入依据上面算出来，需要3个子网。那么就是2位子网号，6位主机号
  >
  > 那么我们开始计算每个网段的IP地址范围，这里**包括**了网络地址与广播地址。做题需要看清楚，题目要不要你把这两个地址写上。

| 网段       | 网络号           | 起始IP地址    | 结束IP地址    | 子网掩码        | IP地址数目 |
| ---------- | ---------------- | ------------- | ------------- | --------------- | ---------- |
| LAN1       | 192.168.1.0/26   | 192.168.1.0   | 192.168.1.63  | 255.255.255.192 | 64         |
| LAN2       | 192.168.1.64/26  | 192.168.1.64  | 192.168.1.127 | 255.255.255.192 | 64         |
| LAN3       | 192.168.1.128/26 | 192.168.1.128 | 192.168.1.191 | 255.255.255.192 | 64         |
| 未使用网段 | 192.168.1.192/26 | 192.168.1.192 | 192.168.1.255 | 255.255.255.192 | 64         |

- 做出一些结论

  > 1、路由聚合后的地址，发现是`192.168.1.0/24`，为什么是这样呢？因为路由聚合后，其实就是把几个小网段分成了一个大网段。而我们是把这个大网段分成了几个小网段，所以聚合后还是这个大网段
  >
  > 2、每个子网掩码都是一样的，因为网络位是一样的。
  >
  > 3、我写**起始IP地址**与**结束IP地址**的原因，更多地是想说，分子网的时候，IP地址不应该有重合。所以，分子网，以及确定子网的时候，我们要牢牢抓住IP地址范围来看，哪些子网的IP范围有重合。
  >
  > 4、注意我把没有使用的网段也写出来，说明这个网段，用这个分法，是可以分出四个子网的，并且如果这么分，是一定会分出四个子网的，只是我们不用而已。所以，全部IP地址数目应该是4*64 = 256个。

然后对于题目一些点的注意，看好题目要求什么，是依据子网划分还是依据子网中主机数目划分。有些选择题会给定一些条件，要你判断子网直接是否冲突，这个就根据IP地址范围来看是否冲突。

## 非定长子网的划分

&emsp;这个才是子网划分的难点，上面的应该是挺简单的。非定长子网，便是每个网段的IP地址数目不是等长的。这种一般是根据主机数目来划分的，不会要根据划分几个子网来划分。

- 假如，我们需要对`192.168.1.0/24`进行子网的划分，然后每个子网的主机数目为`A：30、B：115、C：60、D：4`。

  > $2^b-2\geq n$的原则，每个子网的主机位数依次是`A：5、B：7、C：6、D：3`
  >
  > 所以，每个子网的子网位依次是`A：3、B：1、C：2、D：5`
  >
  > 为了方便起见，我们常常把子网位少的先分。

| 网段 | 网络地址         | 起始IP地址    | 结束IP地址    | 子网掩码        | IP地址数目 |
| ---- | ---------------- | ------------- | ------------- | --------------- | ---------- |
| A    | 192.168.1.192/27 | 192.168.1.192 | 192.168.1.223 | 255.255.255.224 | 32         |
| B    | 192.168.1.0/25   | 192.168.1.0   | 192.168.1.127 | 255.255.255.128 | 128        |
| C    | 192.168.1.128/26 | 192.168.1.128 | 192.168.1.191 | 255.255.255.192 | 64         |
| D    | 192.168.1.240/29 | 192.168.1.240 | 192.168.1.247 | 255.255.255.248 | 8          |

- 结论

  > 1、首先，每个IP地址依然没有冲突
  >
  > 2、每个网段的IP地址数目都比其主机数目多1
  >
  > 3、这里我没有给出未分配网段，原因是很多网段太零碎了，所以没有给出
  >
  > 4、注意网络地址给的很讲究，我们拿IP地址第25位与28位来看。用 空格分割了子网与主机
  >
  > > 对于A是`110   0`，B是`0    000`，C是`10   00`。其中，
  > >
  > > A为什么不能是`000   0`或者`011    0`呢？假如是这样的话，那么可以看看A的IP地址范围与B的IP地址范围，明显会冲突的。A的IP地址范围是`192.168.1.0 ~ 31`或者`192.168.1.96 ~ 127`，与B的`192.168.1.0 ~ 127`冲突了。
  > >
  > > 当然，你此时可以把B改成`1    000`，这样，B的范围就是`192.168.1.128 ~ 255`，冲突也避免了
  >
  > 5、根据第4点，得出结论，短子网掩码（如B）不能是长子网掩码（如A）的前缀，不然会冲突。
  >
  > 6、我们仍然是牢牢抓住IP地址范围来看的，因此IP地址范围是否冲突，是我们划分子网着重需要考虑的因素。如果划分的子网都冲突了，那还叫作什么划分子网啊。
  >
  > 7、同样的，路由聚合后，仍然是`192.168.1.0/24`。所以，得出结论，一个大的网段中的子网，路由聚合后应该是这个大的网段，或者大的网段内的子网。